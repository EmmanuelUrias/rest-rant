(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[32992],{208122:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(397458),i=r(652983),o=r(557180),s=r(213613);let a={github:{normal:{foreground:"#fff",background:"#24292e",border:"#24292e"},hover:{foreground:"#fff",background:"#555",border:"#555"}},gitlab:{normal:{foreground:"#fff",background:"#6b4fbb",border:"#6b4fbb"},hover:{foreground:"#fff",background:"#8367D3",border:"#8367D3"}},bitbucket:{normal:{foreground:"#fff",background:"#0052CC",border:"#0052CC"},hover:{foreground:"#fff",background:"#1668E2",border:"#1668E2"}}},c={github:{fill:"currentColor"},gitlab:{monochrome:!0},bitbucket:{color:"currentColor"}};function l(e){let{gitType:t,children:r,...l}=e,u=(0,i.useMemo)(()=>a[t],[t]),d=(0,i.useMemo)(()=>c[t],[t]);return(0,n.jsxs)(o.Z,{...u,...l,children:[(0,n.jsx)(s.Z,{gitType:t,height:20,style:{marginRight:"var(--geist-gap-quarter)"},width:20,...d}),r]})}},213613:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(397458),i=r(794569),o=r(356851),s=r(311125);function a(e){let{gitType:t,...r}=e;switch(t){case"github":return(0,n.jsx)(i.Z,{...r});case"gitlab":return(0,n.jsx)(o.Z,{...r});case"bitbucket":return(0,n.jsx)(s.Z,{...r});default:throw Error(`gitType ${t} not defined in GitLogo`)}}},603038:function(e,t,r){"use strict";r.d(t,{R:function(){return p}});var n=r(397458),i=r(652983),o=r(425789),s=r(285154),a=r(442214),c=r(369378),l=r(113745),u=r(398643),d=r.n(u);let g=i.createContext({}),p=()=>i.useContext(g);t.Z=i.forwardRef(function(e,t){let{title:r,titleDisabled:u,titleSuffix:p,subtitle:h,children:f,active:m=!0,as:x,className:b,disableScrolling:y,...v}=e,j=i.useRef(null);return i.useEffect(()=>{m&&!y&&j.current&&setTimeout(()=>{j.current?.scrollIntoView({behavior:"smooth"})},500)},[m,y]),(0,n.jsx)(g.Provider,{value:{active:m},children:(0,n.jsx)(a.Z,{Component:x||"article",border:!0,className:(0,o.Z)(d().root,{[d().active]:m},b),...v,children:(0,n.jsxs)("div",{className:d().card,ref:(0,s.Z)([j,t]),title:m?void 0:u,children:[(0,n.jsxs)(l.Z,{align:"center",direction:"row",justify:"space-between",children:[(0,n.jsx)(c.ZP,{h3:!0,noMargin:!0,style:{...!m&&{color:"var(--accents-3)"}},children:r}),p||null]}),(0,n.jsx)("hr",{className:"geist-hr-reset",style:{marginTop:"var(--geist-space-4x)"}}),h?(0,n.jsx)(c.ZP,{Component:"div",h6:!0,noMargin:!0,style:{color:m?"var(--accents-6)":"var(--accents-3)",margin:"var(--geist-gap) 0"},weight:400,children:h}):null,f]})})})})},689784:function(e,t,r){"use strict";r.d(t,{XO:function(){return s},hK:function(){return o},lS:function(){return c}});var n=r(652983);let i={status:"creating-repo",cloneRepoStatus:"not-started",creatingTeamCollapsed:!1,creatingTeamSkipped:!1,projectId:null,projectName:"",clonedRepo:{id:null,slug:null},repo:{namespace:"",name:"",ownerType:"",gitType:""},deploymentId:null},o=n.createContext({}),s=()=>n.useContext(o);function a(e,t){switch(t.type){case"SET_STATUS":return{...e,status:t.status};case"SET_CREATING_REPO_WITH_TEAM":return{...e,status:"creating-repo-with-team",createdTeamId:t.teamId};case"SET_CLONE_REPO_STATUS":return{...e,cloneRepoStatus:t.cloneRepoStatus};case"SET_TARGET_NAMESPACE":return{...e,repo:{...e.repo,namespace:t.namespace,ownerType:t.ownerType}};case"SET_TARGET_REPO":return{...e,repo:{...e.repo,name:t.name}};case"SET_GIT_TYPE":return{...e,repo:{...e.repo,gitType:t.gitType}};case"SET_PROJECT_ID":return{...e,projectId:t.projectId};case"SET_PROJECT_NAME":return{...e,projectName:t.projectName};case"SET_CLONED_REPO":return{...e,clonedRepo:{id:t.data.id,slug:t.data.slug}};case"SET_DEPLOYMENT_ID":return{...e,deploymentId:t.deploymentId};case"SET_CREATE_TEAM_COLLAPSED":return{...e,creatingTeamCollapsed:t.creatingTeamCollapsed};case"SET_CREATE_TEAM_SKIPPED":return{...e,creatingTeamSkipped:t.creatingTeamSkipped};case"RESET":return i;default:return e}}function c(){return n.useReducer(a,i)}},271790:function(e,t,r){"use strict";r.d(t,{A:function(){return g},V:function(){return d}});var n=r(397458),i=r(652983),o=r(633361),s=r(213613),a=r(665882),c=r(14313),l=r(394259),u=r.n(l);function d(e){let{projects:t,error:r,gitType:i}=e,a=(t?.length??0)>1?11:24;return r?(0,n.jsx)("div",{className:u().frameworkIconGroup,children:(0,n.jsx)(s.Z,{gitType:i,height:24,width:24})}):t?(0,n.jsx)("div",{className:u().frameworkIconGroup,children:t.length<5?t.map(e=>e.framework.logo?(0,n.jsx)(g,{framework:e.framework,size:a},e.name):null):(0,n.jsx)("div",{className:u().numProjects,children:t.length<9?t.length:"9+"})}):(0,n.jsx)("div",{className:u().frameworkIconGroup,children:(0,n.jsx)(o.O,{height:24,rounded:!0,width:24})})}let g=(0,i.memo)(function(e){let{framework:t,size:r,style:i,className:o}=e,s=(0,a.EE)({logo:t.logo,darkModeLogo:t.darkModeLogo});return(0,n.jsx)(c.qE,{className:o,size:r,style:i,title:t.name,url:s})})},883116:function(e,t,r){"use strict";r.d(t,{L:function(){return j},s:function(){return _}});var n=r(397458),i=r(652983),o=r(706774),s=r(730007),a=r(780356),c=r(737727),l=r(577072),u=r(222827),d=r(859485),g=r(213613),p=r(476795),h=r(783277),f=r(789779),m=r(603038),x=r(288048),b=r(582935),y=r(633361),v=r(689784);function j(e){let{gitType:t,namespace:r,repo:j,template:w,disabled:T,dispatch:E,error:S,setRepoNameStates:A,loading:Z}=e,{data:I,mutate:C,isLoading:N}=(0,f.ZP)({provider:t}),{dispatch:k}=(0,v.XO)(),{active:P}=(0,m.R)(),{user:L,isLoading:R}=(0,h.a)(),{team:O,isReady:G}=(0,p.t7)(),M=R||!G||N;i.useEffect(()=>{if(w&&t){let e=j??w;k({type:"SET_TARGET_REPO",name:e}),A(n=>({...n,[t]:[r,e]}))}},[w,E,k,t,r,A,j]);let $=i.useCallback(e=>{let{value:n}=e.currentTarget;E({type:"SET_REPO",gitType:t,namespace:r,repo:n}),k({type:"SET_TARGET_REPO",name:n})},[E,k,t,r]),D=i.useCallback(async e=>{let r=await C(),n=Array.isArray(r)&&r.length>0&&r.find(t=>t.installationId===e)||null;E({type:"SET_REPO",gitType:t,namespace:n?.name,repo:j}),n&&k({type:"SET_TARGET_NAMESPACE",namespace:n.slug,ownerType:n.ownerType})},[E,k,t,C,j]),{open:B}=(0,x.Z)({onSuccess:(0,b._)(D)}),[U,H]=i.useState(!1);_(t,I,U,!N&&I,H,B);let z=i.useCallback(e=>{if("select-different-git-provider"===e)E({type:"SET_REPO",gitType:t,namespace:void 0,repo:null}),E({type:"SET_GIT_TYPE",gitType:void 0}),k({type:"SET_TARGET_NAMESPACE",namespace:"",ownerType:""}),k({type:"SET_TARGET_REPO",name:""}),k({type:"SET_GIT_TYPE",gitType:""});else if("install-github"===e)H(!0),B();else if("string"==typeof e){let r="",n=I?.find(t=>{let{slug:r}=t;return r===e});n&&(r=n.ownerType),E({type:"SET_REPO",gitType:t,namespace:e,repo:j,ownerType:r}),k({type:"SET_TARGET_NAMESPACE",namespace:e,ownerType:r})}},[E,k,t,B,j,I]),F=I&&[...I.map(e=>({value:e.slug||"",label:e.name||"",prefix:(0,n.jsx)(g.Z,{gitType:t}),isMenu:!1})),..."github"===t?[{value:"install-github",label:"Add GitHub Account",prefix:(0,n.jsx)(u.Z,{size:14}),isMenu:!0}]:[],{value:"select-different-git-provider",label:"Switch Git Provider",prefix:(0,n.jsx)(d.Z,{size:14}),isMenu:!0}];return i.useEffect(()=>{!r&&I&&I.length>0&&(E({type:"SET_REPO",gitType:t,namespace:I[0].slug,repo:j,ownerType:I[0].ownerType}),k({type:"SET_TARGET_NAMESPACE",namespace:I[0].slug,ownerType:I[0].ownerType}))},[E,k,t,r,j,I]),i.useEffect(()=>{let e=w||"",r=I?.find(e=>L?.preferredScopesAndGitNamespaces?.find(t=>t.scopeId===(O?.id||L.uid)&&String(e.id)===String(t.gitNamespaceId))),n=r??I?.find(e=>e.id===parseInt(L?.importFlowGitNamespaceId??""))??I?.[0];n&&t&&(k({type:"SET_TARGET_NAMESPACE",namespace:n.slug,ownerType:n.ownerType}),A(r=>({...r,[t]:[n.slug,e]})))},[L,I,k,t,A,O,w]),(0,n.jsxs)(a.Z,{direction:["column","row","row"],gap:0,inline:!0,noWrap:!0,style:{width:"100%"},children:[(0,n.jsx)(a.Z,{flex:"45%",children:(0,n.jsx)(s.Z,{id:"git-scope-select",value:"Git Scope",withInput:!0,children:M?(0,n.jsx)(y.O,{height:40,width:"100%"}):(0,n.jsxs)(c.Z,{className:"select-git-scope",clearable:!1,disabled:Z||T||!Array.isArray(I)&&P,onChange:z,placeholder:"Select Git Scope",value:r,children:[(0,n.jsx)(c.Z.Input,{loading:I?.length===0}),(0,n.jsx)(c.Z.List,{children:F?.map(e=>(0,n.jsx)(c.Z.Option,{isMenu:e.isMenu,prefix:e.prefix,value:e.value,children:e.label},e.value))})]})})}),(0,n.jsx)(l.L,{x:1/3,y:2/3}),(0,n.jsx)(a.Z,{flex:"60%",children:(0,n.jsx)(s.Z,{id:"repo-name",value:"Repository Name",withInput:!0,children:M?(0,n.jsx)(y.O,{height:40,width:"100%"}):(0,n.jsx)(o.I,{autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",className:"repository-name",disabled:Z||T||!Array.isArray(I)&&P,error:S,id:"repo-name",maxLength:100,onChange:$,placeholder:"my-repository",spellCheck:!1,value:j||"",width:"100%"})})})]})}function _(e,t,r,n,o,s){i.useEffect(()=>{"github"!==e||t?.length||r||!n||(o(!0),s())},[e,t,s,r,n,o])}},360692:function(e,t,r){"use strict";r.d(t,{Z:function(){return f}});var n=r(397458);r(652983);var i=r(425789),o=r(481437),s=r(924e3),a=r(577072),c=r(815780),l=r(113745),u=r(727793),d=r(783277),g=r(476795),p=r(656495),h=r.n(p);function f(e){let{small:t}=e,{user:r}=(0,d.a)(),{team:p}=(0,g.t7)(),f=()=>(0,u.ZY)({slug:r?.username});return t?(0,n.jsxs)(l.Z,{align:"center",className:(0,i.Z)(h().box,{[h().small]:t}),direction:"row",children:[(0,n.jsx)(l.Z,{className:h().icon,flex:"0 0 auto",children:(0,n.jsxs)(l.Z,{align:"center",direction:"row",children:[(0,n.jsx)(c.Z,{}),(0,n.jsx)(a.L,{x:.5})]})}),(0,n.jsx)(l.Z,{children:(0,n.jsx)(o.x,{color:"accents-6",size:14,children:"To access your Git Login Connections, please authenticate with your Personal Vercel Account."})}),(0,n.jsx)(a.L,{x:.5}),(0,n.jsx)(l.Z,{flex:"0 0 auto",children:(0,n.jsx)(s.z,{onClick:f,type:"success",typeName:"button",children:"Authenticate"})})]}):(0,n.jsxs)(l.Z,{align:"center",className:(0,i.Z)(h().box),direction:"column",gap:7,justify:"center",children:[(0,n.jsx)(l.Z,{children:(0,n.jsx)(o.x,{align:"center",color:"accents-6",size:14,children:"To access your Git Login Connections, please authenticate with your Personal Vercel Account."})}),(0,n.jsx)(l.Z,{children:(0,n.jsxs)(o.x,{align:"center",color:"accents-6",size:14,children:["At the moment, your SAML session only grants you access to"," ",p?`the ${p.name||p.slug} team`:"your current team","."]})}),(0,n.jsx)(l.Z,{flex:"0 0 auto",children:(0,n.jsx)(s.z,{onClick:f,type:"success",typeName:"button",children:"Authenticate"})})]})}},607016:function(e,t,r){"use strict";r.d(t,{j:function(){return J},x:function(){return Y}});var n=r(397458),i=r(652983),o=r(425789),s=r(369378),a=r(201396),c=r(577072),l=r(737727),u=r(780356),d=r(619914),g=r(859485),p=r(222827),h=r(639381),f=r(633361),m=r(213613),x=r(208122),b=r(360692),y=r(241663),v=r(89378),j=r(671976),_=r(191425),w=r(131588),T=r(288048),E=r(644941),S=r(783277),A=r(13684),Z=r(789779),I=r(476795),C=r(695913),N=r(883116),k=r(546233),P=r.n(k),L=r(102560),R=r(629780),O=r(113745),G=r(968193),M=r(19512),$=r(271790);function D(e){let{repo:t,gitType:r,search:s,renderButton:a,repoSkeletonWidthPercentage:c=100,currentNamespace:l}=e,{data:u,error:d,isLoading:g}=(0,M.t)(t?.url),p=(0,G.Rd)(t?.updatedAt),m=(0,i.useMemo)(()=>t?s?t.name.split(s).reduce((e,t,r)=>(0!==r&&e.push((0,n.jsx)("mark",{className:P().suggestionHighlight,children:s},e.length)),t&&e.push((0,n.jsx)("span",{children:t},e.length)),e),[]):[(0,n.jsx)("span",{children:t.name})]:null,[t,s]),{team:x}=(0,I.t7)(),b=x?`${x.slug}/`:"",y=(0,i.useMemo)(()=>a(t,r,b,l,u?.projects[0],u?.projects.length),[t,r,b,u]);return(0,n.jsx)(L.JH,{actions:(0,n.jsx)(O.Z,{direction:"row",children:y}),"data-testid":(0,v.C)("import-flow-layout","suggestion-card","suggestion"),placeholder:!t||g,thumbnail:(0,n.jsx)(L.bL,{size:24,children:g?(0,n.jsx)(h.Z,{size:24}):(0,n.jsx)($.V,{error:d,gitType:r,projects:u?.projects})}),children:(0,n.jsx)(L.Sn,{children:t?(0,n.jsxs)(O.Z,{align:"center",className:P().entityStack,direction:"row",gap:1,children:[(0,n.jsx)(O.Z,{className:P().entityName,flex:"0 1 auto",children:(0,n.jsx)("span",{className:(0,o.Z)(P().repoTitle,"geist-ellipsis"),title:t.name,children:m})}),t?.private?(0,n.jsx)(O.Z,{as:"span",flex:"0 0 auto",title:"Private Git Repository",vcenter:!0,children:(0,n.jsx)(R.Z,{color:"var(--accents-5)",size:14})}):null,(0,n.jsx)(O.Z,{className:"geist-hide-on-mobile",flex:"0 0 auto",children:(0,n.jsx)("span",{className:P().repoDescription,children:"\xb7"})}),(0,n.jsx)(O.Z,{className:"geist-hide-on-mobile",flex:"0 0 auto",children:(0,n.jsx)("span",{className:P().repoDescription,children:p})})]}):(0,n.jsx)(f.O,{height:20,width:`${c}%`})})})}function B(e){let{"data-testid":t,gitType:r,dispatch:o,shouldUpdatePreferredGitAccount:s,size:a}=e,[c,l]=(0,i.useState)(!1),{user:u}=(0,S.a)(),{account:d,mutate:g}=(0,A.Z)(u??null),p=(0,i.useCallback)(async()=>{l(!0);let e=await (0,Z.Iw)(r);l(!1);let t=Array.isArray(e)&&e.length>0?e[0].id:void 0;o({type:"SET_GIT_ACCOUNT",gitAccount:{provider:r,namespaceId:t}}),s&&Y({provider:r,namespaceId:t})},[o,r,s]),h=(0,w.Z)({onOpen(){l(!0)},onAbort(){l(!1)},onSuccess(){p(),g(),l(!1)}});return(0,n.jsx)(f.O,{show:!d,children:(0,n.jsxs)(x.Z,{align:"grow","data-testid":t,gitType:r,loading:c,onClick(){d&&(d[r]?.verified?p():h.open(r))},size:a,width:"100%",children:[(0,n.jsx)("span",{className:P().continueWithText,children:"Continue with"})," ",(0,j.F)(r)]})})}function U(e){let{search:t,gitAccount:r,configureGithubInstallation:a}=e,l=r?.provider,{data:d}=(0,Z.ZP)({provider:l}),g=(0,i.useMemo)(()=>r&&d?d.find(e=>e.id===r?.namespaceId)?.name:null,[d,r]);return(0,n.jsx)(u.Z,{center:!0,className:(0,o.Z)(P().selectProvider,P().emptyResult),children:(0,n.jsxs)(u.Z,{flex:"0 0 auto",gap:0,children:[(0,n.jsxs)(s.ZP,{center:!0,"data-testid":(0,v.C)("import-flow-layout","no-results-found-text"),noMargin:!0,preset:"body-2",weight:500,children:["No ",t?"Results":"Git Repositories"," Found"]}),(0,n.jsx)(c.L,{y:.25}),t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.ZP,{center:!0,noMargin:!0,preset:"body-2",style:{color:"var(--accents-6)",wordBreak:"break-word"},children:(0,n.jsxs)(u.Z,{center:!0,inline:!0,row:!0,children:["Your search ",t?`for "${t}"`:null," ",r&&g?(0,n.jsxs)(n.Fragment,{children:["in"," ",(0,n.jsxs)(u.Z,{center:!0,flex:"0 0 auto",inline:!0,noWrap:!0,row:!0,children:[(0,n.jsx)(c.L,{x:.2}),(0,n.jsx)(u.Z,{flex:"0 0 auto",children:(0,n.jsx)(m.Z,{gitType:r.provider})}),(0,n.jsx)(c.L,{x:.2}),(0,n.jsx)(s.ZP,{className:"geist-ellipsis",span:!0,weight:500,children:g}),(0,n.jsx)(c.L,{x:.2})]})]}):null," ","did not return any results."]})}),(0,n.jsx)(c.L,{y:.25})]}):null,a?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.ZP,{center:!0,noMargin:!0,preset:"body-2",style:{color:"var(--accents-6)"},children:"Make sure to grant Vercel access to the Git repositories you’d like to import."}),(0,n.jsx)(c.L,{y:1}),(0,n.jsx)(x.Z,{"data-testid":(0,v.C)("import-flow-layout","configure-github-app-button"),gitType:"github",loading:!1,onClick:a,children:"Configure GitHub App"})]}):(0,n.jsx)(s.ZP,{center:!0,noMargin:!0,preset:"body-2",style:{color:"var(--accents-6)"},children:"Try selecting a different Git account or organization on the top left."})]})})}function H(){return(0,n.jsx)(u.Z,{center:!0,className:(0,o.Z)(P().selectProvider,P().emptyResult),children:(0,n.jsxs)(u.Z,{flex:"0 0 auto",gap:0,children:[(0,n.jsx)(s.ZP,{center:!0,"data-testid":(0,v.C)("import-flow-layout","almost-done"),noMargin:!0,preset:"body-2",weight:500,children:"You're Almost There"}),(0,n.jsx)(c.L,{y:.25}),(0,n.jsx)(s.ZP,{center:!0,noMargin:!0,preset:"body-2",style:{color:"var(--accents-6)"},children:"Select a GitHub account or organization on the top left to see your Git repositories."})]})})}function z(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.L,{y:.5}),(0,n.jsxs)(u.Z,{center:!0,className:P().loadingResult,halfGap:!0,row:!0,children:[(0,n.jsx)(c.L,{expand:!0}),(0,n.jsx)(u.Z,{flex:"0 0 auto",children:(0,n.jsx)(h.Z,{})}),(0,n.jsx)(u.Z,{flex:"0 0 auto",children:(0,n.jsx)(s.ZP,{center:!0,preset:"body-2",style:{color:"var(--accents-5)"},children:"Loading results..."})}),(0,n.jsx)(c.L,{expand:!0})]})]})}function F(e){let{repos:t,revalidateRepos:r,search:h,debouncedSearch:x,gitAccount:b,dispatch:y,renderButton:j,shouldUpdatePreferredGitAccount:_,small:w,onChangeGitSelector:E}=e,S=b?.provider,{data:A,mutate:k,isLoading:L}=(0,Z.ZP)({provider:S}),[R,O]=(0,i.useState)(!1),{team:G}=(0,I.t7)(),{can:M,isLoading:$}=(0,C.ZP)(),B=M(C.aU.Create,C._z.Project),F=!$&&!B,V=(0,i.useCallback)(async e=>{let{installationId:t}=e,n=await k(),i=Array.isArray(n)&&n.length>0&&(n.find(e=>e.installationId===t)?.id||n[0].id)||null;y({type:"SET_GIT_NAMESPACE",namespaceId:i}),_&&Y({provider:"github",namespaceId:i}),O(!0),await r(),O(!1)},[r,y,k,_]),{open:W}=(0,T.Z)({onSuccess:V}),[J,K]=(0,i.useState)(!1),q=(0,i.useMemo)(()=>{if("github"===S&&A?.length){let e=A.find(e=>Number(e.id)===Number(b?.namespaceId));if(e?.isAccessRestricted)return W}},[S,W,A,b]),X=b?.provider==="github"&&!b.namespaceId;(0,N.s)(S,A,J,!L,K,W);let Q=(0,i.useMemo)(()=>{if(F)return{ui:(0,n.jsx)(f.O,{height:"100%",width:"100%"})};if(h!==x)return{ui:(0,n.jsx)(z,{}),suggestionListBorder:!0};if(!t||!A||R)return null===h?{ui:[,,,,,].fill(1).map((e,t)=>(0,n.jsx)(D,{renderButton:j,repoSkeletonWidthPercentage:60+Math.floor(30*Math.sin(56130*t+153))},t)),suggestionListBorder:!1}:{ui:(0,n.jsx)(z,{}),suggestionListBorder:!0};if(X)return{ui:(0,n.jsx)(H,{}),suggestionListBorder:!1};if(0===t.length)return null===h?{ui:(0,n.jsx)(U,{configureGithubInstallation:q,gitAccount:b}),suggestionListBorder:!1}:{ui:(0,n.jsx)(U,{configureGithubInstallation:q,gitAccount:b,search:x}),suggestionListBorder:!1};let e=!1;b?.provider==="github"?e=t.length<5&&!!q:(b?.provider==="gitlab"||b?.provider==="bitbucket")&&(e=t.length<5);let r=A.find(e=>String(e.id)===String(b?.namespaceId));return{ui:(0,n.jsxs)(n.Fragment,{children:[t.slice(0,5).map(e=>(0,n.jsx)(D,{currentNamespace:r,gitType:b?.provider,renderButton:j,repo:e,search:x},e.id)),e?(0,n.jsxs)(s.ZP,{preset:"body-2",style:{color:"var(--accents-6)",textAlign:"left"},children:["Missing Git repository?"," ",b?.provider==="github"?(0,n.jsx)(a.r,{href:"",onClick:q,variant:"highlight",children:"Adjust GitHub App Permissions →"}):(0,n.jsx)(a.r,{external:!0,href:`/docs/concepts/git/vercel-for-${b?.provider}#missing-git-repository`,variant:"highlight",children:"Learn More"})]}):null]}),suggestionListBorder:t.length<5}},[F,h,x,t,A,R,X,b,q,j]),ee=(0,i.useCallback)(e=>{console.log("SET_GIT_NAMESPACE",e),"select-different-git-provider"===e?(y({type:"SET_GIT_ACCOUNT",gitAccount:null}),_&&Y({provider:null,namespaceId:null})):"install-github"===e?(K(!0),W()):(y({type:"SET_GIT_NAMESPACE",namespaceId:e}),_&&Y({namespaceId:e})),E?.()},[y,W,_,E]),et=A&&[...A.map(e=>({"data-testid":(0,v.C)("git-scope-combobox",`namespace-${e.provider}`),value:String(e.id),label:e.name||"",prefix:(0,n.jsx)(m.Z,{gitType:S}),isMenu:!1})),..."github"===S?[{"data-testid":(0,v.C)("import-flow-layout","git-scope-combobox","add-github-account"),value:"install-github",label:"Add GitHub Account",prefix:(0,n.jsx)(p.Z,{size:14}),isMenu:!0}]:[],{"data-testid":(0,v.C)("import-flow-layout","git-scope-combobox","switch-git-provider"),value:"select-different-git-provider",label:"Switch Git Provider",prefix:(0,n.jsx)(g.Z,{size:14}),isMenu:!0}],er=A?.find(e=>String(e.id)===String(b?.namespaceId));return(0,i.useEffect)(()=>{let e=A?.find(e=>String(e.id)===String(b?.namespaceId));!e&&A?.length&&y({type:"SET_GIT_NAMESPACE",namespaceId:A[0].id})},[y,b,A]),(0,n.jsxs)(u.Z,{className:(0,o.Z)(P().suggestionList,{[P().suggestionListBorder]:!w&&Q.suggestionListBorder}),gap:!1,children:[(0,n.jsx)(u.Z,{flex:"0 0 auto",children:(0,n.jsxs)(u.Z,{className:P().suggestionDescription,direction:["column","row","row"],gap:!1,inline:!0,noWrap:!0,children:[(0,n.jsx)(u.Z,{flex:"50%",children:(0,n.jsx)(f.O,{show:void 0===b||!Array.isArray(A)||F,children:(0,n.jsxs)(l.Z,{clearable:!1,"data-git-namespace-combobox":!0,"data-testid":(0,v.C)("import-flow-layout","git-scope-combobox"),onChange:ee,placeholder:"Select a Git Namespace",value:b?.namespaceId?String(b.namespaceId):null,children:[(0,n.jsx)(l.Z.Input,{"data-git-namespace-combobox-input":!0,"data-testid":(0,v.C)("import-flow-layout","git-scope-combobox","input"),loading:"github"===S&&A?.length===0}),(0,n.jsx)(l.Z.List,{children:et?.map(e=>(0,n.jsx)(l.Z.Option,{"data-testid":e["data-testid"],isMenu:e.isMenu,prefix:e.prefix,value:e.value,children:e.label},e.value))})]})})}),(0,n.jsx)(c.L,{x:1/3,y:1/3}),(0,n.jsx)(u.Z,{flex:"50%",children:(0,n.jsx)(f.O,{show:F||!(er?.ownerType==="team"&&!G)&&(Boolean(!t&&null===h&&!X)||!Array.isArray(A)||R),children:(0,n.jsx)(d.Z,{"data-testid":(0,v.C)("import-flow-layout","search-input"),disabled:Boolean(t?.length===0&&null===h),onChange:e=>y({type:"SET_SEARCH",search:e.target.value}),placeholder:"Search...",value:h??"",width:"100%"})})})]})}),(0,n.jsx)(c.L,{y:2/3}),(0,n.jsx)(u.Z,{flex:"1 0 auto",children:(0,n.jsx)(u.Z,{className:P().repoList,"data-testid":(0,v.C)("import-flow-layout","repository-list"),gap:!1,children:Q.ui})})]})}function V(e){let{dispatch:t,small:r,shouldUpdatePreferredGitAccount:l}=e;return r?(0,n.jsxs)("div",{className:(0,o.Z)(P().selectProvider,P().small),children:[["github","gitlab","bitbucket"].map(e=>(0,n.jsxs)(i.Fragment,{children:[(0,n.jsx)("span",{className:P().providerBtn,children:(0,n.jsx)(B,{"data-testid":(0,v.C)("select-git-repository","choose-provider",e),dispatch:t,gitType:e,shouldUpdatePreferredGitAccount:l})}),(0,n.jsx)("span",{className:(0,o.Z)(P().providerBtn,P().providerBtnMobile),children:(0,n.jsx)(B,{"data-testid":(0,v.C)("select-git-repository","choose-provider",e),dispatch:t,gitType:e,shouldUpdatePreferredGitAccount:l,size:"small"})}),(0,n.jsx)(c.L,{x:.5,y:.25})]},e)),(0,n.jsx)(c.L,{expand:!0,y:.5}),(0,n.jsx)(s.ZP,{span:!0,type:"success",weight:500,children:(0,n.jsx)(a.r,{external:!0,href:"/account/login-connections",variant:"highlight",children:"Manage Login Connections"})})]}):(0,n.jsx)(u.Z,{center:!0,className:P().selectProvider,children:(0,n.jsxs)(u.Z,{center:!0,flex:"0 0 auto",children:[(0,n.jsx)(s.ZP,{center:!0,preset:"body-2",style:{color:"var(--accents-6)"},children:"Select a Git provider to import an existing project from a Git Repository."}),(0,n.jsx)(c.L,{}),(0,n.jsx)(u.Z,{direction:"column",gap:1/3,style:{width:320},children:["github","gitlab","bitbucket"].map(e=>(0,n.jsx)(u.Z,{children:(0,n.jsx)(B,{"data-testid":(0,v.C)("select-git-repository","choose-provider",e),dispatch:t,gitType:e,shouldUpdatePreferredGitAccount:l})},e))}),(0,n.jsx)(c.L,{}),(0,n.jsx)(s.ZP,{center:!0,preset:"body-2",type:"success",weight:500,children:(0,n.jsx)(a.r,{external:!0,href:"/account/login-connections",children:"Manage Login Connections"})})]})})}function W(e,t){switch(t.type){case"INIT_GIT_ACCOUNT":return{...e,preferredGitAccount:t.preferredGitAccount};case"SET_SEARCH":return{...e,search:t.search};case"SET_DEBOUNCED_SEARCH":return{...e,debouncedSearch:t.debouncedSearch,ts:e.debouncedSearch!==e.search?Date.now():e.ts};case"SET_GIT_ACCOUNT":return{...e,search:null,localGitAccount:t.gitAccount};case"SET_GIT_NAMESPACE":let r=e.localGitAccount??e.preferredGitAccount;return r?{...e,localGitAccount:{...r,namespaceId:t.namespaceId}}:e;default:return e}}let Y=async e=>{let{namespaceId:t,provider:r}=e;await (0,_.I)(y.zh,{method:"PATCH",body:JSON.stringify({importFlowGitNamespaceId:t,importFlowGitProvider:r})})};function J(e){let{renderButton:t,small:r,shouldUpdatePreferredGitAccount:s,onChangeGitSelector:a}=e,{user:c}=(0,S.a)(),{account:l,isLoading:u}=(0,A.Z)(c),[{search:d,debouncedSearch:g,localGitAccount:p,preferredGitAccount:h,ts:f},m]=(0,i.useReducer)(W,{search:null,debouncedSearch:null,ts:Date.now()});(0,i.useEffect)(()=>{let e=setTimeout(()=>m({type:"SET_DEBOUNCED_SEARCH",debouncedSearch:d}),300);return()=>clearTimeout(e)},[d]);let{data:x,mutate:y}=(0,E.Z)({query:g,provider:p?.provider,namespaceId:p?.namespaceId,s:f});(0,i.useEffect)(()=>{x&&"error"in x&&"installation_not_found"===x.error.code?(m({type:"SET_GIT_NAMESPACE",namespaceId:null}),s&&Y({namespaceId:null})):x&&s&&m({type:"INIT_GIT_ACCOUNT",preferredGitAccount:"error"in x?null:x.gitAccount})},[x,s]);let v=(0,i.useMemo)(()=>{let e=void 0!==p?p:h,i=l?.github?.verified??!1,o=l?.gitlab?.verified??!1,f=l?.bitbucket?.verified??!1;return s&&void 0===h||u||(i||o||f)&&e?(0,n.jsx)(F,{debouncedSearch:g,dispatch:m,gitAccount:e,onChangeGitSelector:a,renderButton:t,repos:x&&"repos"in x?x.repos:void 0,revalidateRepos:y,search:d,shouldUpdatePreferredGitAccount:s,small:r}):c?.limited?(0,n.jsx)(b.Z,{small:r}):(0,n.jsx)(V,{dispatch:m,shouldUpdatePreferredGitAccount:!0,small:r})},[p,h,s,l?.github?.verified,l?.gitlab?.verified,l?.bitbucket?.verified,u,c?.limited,r,g,a,t,x,y,d]);return(0,n.jsx)("div",{className:(0,o.Z)(P().suggestionBox,{[P().small]:r}),children:v})}},665882:function(e,t,r){"use strict";r.d(t,{EE:function(){return a},LT:function(){return o},ok:function(){return s}});var n=r(652983),i=r(585899);function o(e,t,r){return r?e.logo:"dark"===t&&e.darkModeLogo?e.darkModeLogo:e.logo}function s(){let e=(0,i.Z)(),[t,r]=(0,n.useState)(!1);return(0,n.useEffect)(()=>r(!0),[]),{loading:!t,resolvedTheme:e?"light":"dark"}}function a(e){let{loading:t,resolvedTheme:r}=s();return o(e,r,t)}},442214:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var n=r(397458);r(652983);var i=r(465635),o=r.n(i),s=r(780356);function a(e){let{className:t,classNames:r=[],styles:i,hoverAnimation:a,border:c=!1,shadow:l=!0,padding:u=!0,children:d,...g}=e,{className:p,styles:h}={styles:(0,n.jsx)(o(),{id:"56e98e7b8fbc6102",dynamic:[u?"var(--geist-gap)":"0",l?"var(--shadow-small)":"none",c?"border: 1px solid var(--accents-2);":"",a?"var(--shadow-large)":l?"var(--shadow-small)":"none",a?"1":"auto"],children:`.geist-card.__jsx-style-dynamic-selector{padding:${u?"var(--geist-gap)":"0"};-webkit-border-radius:var(--geist-radius);-moz-border-radius:var(--geist-radius);border-radius:var(--geist-radius);background:var(--geist-background);-webkit-box-shadow:${l?"var(--shadow-small)":"none"};-moz-box-shadow:${l?"var(--shadow-small)":"none"};box-shadow:${l?"var(--shadow-small)":"none"};${c?"border: 1px solid var(--accents-2);":""}
      transition: box-shadow .2s ease;}.__jsx-style-dynamic-selector:hover{-webkit-box-shadow:${a?"var(--shadow-large)":l?"var(--shadow-small)":"none"};-moz-box-shadow:${a?"var(--shadow-large)":l?"var(--shadow-small)":"none"};box-shadow:${a?"var(--shadow-large)":l?"var(--shadow-small)":"none"};z-index:${a?"1":"auto"}}`}),className:o().dynamic([["56e98e7b8fbc6102",[u?"var(--geist-gap)":"0",l?"var(--shadow-small)":"none",c?"border: 1px solid var(--accents-2);":"",a?"var(--shadow-large)":l?"var(--shadow-small)":"none",a?"1":"auto"]]])};return(0,n.jsx)(s.Z,{classNames:["geist-card",p,t,...r],"data-version":"v1",styleSets:(0,n.jsxs)(n.Fragment,{children:[h,i]}),...g,children:d})}function c(e){let{disabled:t,active:r,children:i,...s}=e,{className:c,styles:l}={styles:(0,n.jsx)(o(),{id:"a47cad01214c0ace",dynamic:[r?"var(--geist-foreground)":"var(--accents-2)",t?"not-allowed":"pointer",r?"var(--geist-foreground)":t?"var(--accents-1)":"var(--geist-background)",r?"var(--geist-background)":t?"var(--accents-4)":"none"],children:`.geist-card-picker.__jsx-style-dynamic-selector{width:512pt;max-width:100%;-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;border:1px solid ${r?"var(--geist-foreground)":"var(--accents-2)"};cursor:${t?"not-allowed":"pointer"};-webkit-transition:background.2s ease,border.2s ease;-moz-transition:background.2s ease,border.2s ease;-o-transition:background.2s ease,border.2s ease;transition:background.2s ease,border.2s ease;background:${r?"var(--geist-foreground)":t?"var(--accents-1)":"var(--geist-background)"};color:${r?"var(--geist-background)":t?"var(--accents-4)":"none"}}.geist-card-picker.__jsx-style-dynamic-selector:hover{border:1px solid var(--geist-foreground)}`}),className:o().dynamic([["a47cad01214c0ace",[r?"var(--geist-foreground)":"var(--accents-2)",t?"not-allowed":"pointer",r?"var(--geist-foreground)":t?"var(--accents-1)":"var(--geist-background)",r?"var(--geist-background)":t?"var(--accents-4)":"none"]]])};return(0,n.jsx)(a,{classNames:["geist-card-picker",c],styles:l,...s,children:i})}function l(e){let{children:t,wide:r,hasAuthors:i,...s}=e,{className:c,styles:l}={styles:(0,n.jsx)(o(),{id:"917d477652f355aa",dynamic:[r?"0":"var(--geist-gap-double)"],children:`.geist-card-project.geist-card.__jsx-style-dynamic-selector{padding:0;margin-bottom:${r?"0":"var(--geist-gap-double)"};-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;background:var(--geist-background)}`}),className:o().dynamic([["917d477652f355aa",[r?"0":"var(--geist-gap-double)"]]])};return(0,n.jsx)(a,{classNames:["geist-card-project",c],styles:l,...s,children:t})}function u(e){let{picker:t=!1,project:r=!1,...i}=e;return t?(0,n.jsx)(c,{...i}):r?(0,n.jsx)(l,{...i}):(0,n.jsx)(a,{...i})}},709250:function(e,t,r){"use strict";var n=r(397458),i=r(652983),o=r(425789),s=r(706774),a=r(125028),c=r(871370),l=r.n(c);let u=(e,t)=>{let{value:r,scrollOnClear:c=!0,onChange:u,disabled:d,width:g,...p}=e,h=(0,i.useRef)(null),f=t||null,[m,x]=(0,i.useState)(null),b=(0,i.useCallback)(e=>{e&&(h.current=e,f&&(f.current=e),x(e.closest("[data-geist-input-wrapper]")?.getBoundingClientRect().width||null),"function"==typeof t&&t(e))},[f,t]),y=(0,i.useCallback)(()=>{h.current&&!d&&(h.current.value&&(h.current.value="",u?.({target:{value:""}})),h.current.focus({preventScroll:!c}))},[h,d,u,c]);return(0,n.jsx)(s.I,{...p,"aria-label":p["aria-label"]||p.label||p.title,disabled:d,onChange:u,ref:b,suffix:Boolean(r)&&(0,n.jsx)("button",{className:(0,o.Z)(l().button,{[l().disabled]:d}),onClick:y,tabIndex:d?-1:void 0,type:"button",children:(0,n.jsx)("span",{children:(0,n.jsx)(a.Z,{})})}),suffixContainer:!1,suffixStyling:!1,value:r,width:g||m||void 0})};t.Z=(0,i.memo)((0,i.forwardRef)(u))},619914:function(e,t,r){"use strict";var n=r(397458),i=r(652983),o=r(706774),s=r(709250),a=r(55506),c=r(639381);let l=(e,t)=>{let{clearable:r=!0,loading:i=!1,...l}=e,u=r?s.Z:o.I,d=i?c.Z:a.Z;return(0,n.jsx)(u,{...l,"aria-label":"Search",prefix:(0,n.jsx)(d,{size:20}),prefixStyling:!1,ref:t,typeName:"search"})};t.Z=(0,i.forwardRef)(l)},605637:function(e,t,r){"use strict";r.d(t,{D:function(){return c}});var n=r(143707),i=r.n(n),o=r(595376),s=r(191425),a=r(241663);async function c(e,t){let{mode:r}=t,n=o.daumtools.userAgent(),c=n?.browser?.name,l=`Website${c?` (${c.charAt(0).toUpperCase()+c.slice(1)})`:""}`,u=i().stringify({mode:r});return(0,s.I)(`${a.OK}?${u}`,{method:"POST",body:JSON.stringify({email:e,tokenName:l}),throwOnHTTPError:!0})}},786551:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var n=r(143707),i=r.n(n),o=r(191425),s=r(157731),a=r(241663);async function c(e){let{email:t,token:r,ssoToken:n}=e,c=i().stringify({email:t,token:r,t:Date.now(),...n&&{ssoToken:n}});try{return await (0,o.I)(`${a.OK}/verify?${c}`,{throwOnHTTPError:!0}),delete globalThis.__loggedIn,!0}catch(l){if((0,s.f)(l)&&403===l.status)throw l;return!1}}},157731:function(e,t,r){"use strict";r.d(t,{f:function(){return i}});var n=r(234498);let i=e=>(0,n.x)(e)&&"code"in e},342166:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(191425);function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.headers=t.headers||{},t.headers.Accept=t.headers.Accept||"application/json",function(e){if("object"==typeof e&&null!==e){let t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}return!1}(t.body)&&(t.body=JSON.stringify(t.body)),t.teamId){let r=encodeURIComponent;e=e.includes("?")?`${e}&teamId=${r(t.teamId)}`:`${e}?teamId=${r(t.teamId)}`}return(0,n.Z)(e,{...t,wrapErrorsLegacy:!0,throwOnHTTPError:!0})}},232701:function(e,t,r){"use strict";r.d(t,{e:function(){return i},j:function(){return o}});var n=r(187968);function i(e){return e&&n.aU[e]?n.Sg[n.aU[e]]:e&&n.Sg[e]?n.Sg[e]:null}function o(e){let t;if("string"!=typeof e)return null;try{t=JSON.parse(decodeURIComponent(e))}catch(r){return null}return t.message=i(t.code)||"Unknown error.",t}},671976:function(e,t,r){"use strict";r.d(t,{F:function(){return i}});let n={github:"GitHub",gitlab:"GitLab",bitbucket:"Bitbucket",saml:"SAML"};function i(e){return n[e]??e}},288048:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(652983),i=r(37963),o=r(241663),s=r(585183);function a(){let{onSuccess:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,n.useRef)(null),r=(0,i.e1)(),a=(0,n.useCallback)(()=>{var n;if(t.current){t.current.open();return}let i={from:"/new",next:`${window.location.origin}/github/installed`},a=(n=JSON.stringify(i),window.btoa(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"));t.current=new s.Z({id:"add-github-installation",url:`${o.px}?state=${encodeURIComponent(a)}`,callbacks:{onBlocked(){t.current=null,r.error("The popup to install the GitHub App could not be opened.")},onPoll(r){let n=new URL(r.location.href);n.origin===window.location.origin&&"/github/installed"===n.pathname&&(t.current?.close(),e?.({installationId:Number(n.searchParams.get("installationId"))}))},onClose(){t.current=null},onAbort(){t.current=null}}}),t.current.open()},[r,e]);return{open:a}}},585183:function(e,t,r){"use strict";function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return new Promise(e=>{requestAnimationFrame(()=>{let r=window.open(...t);e(r)})})}r.d(t,{Z:function(){return i}});class i{constructor({id:e,url:t,width:r=800,height:n=600,callbacks:i={}}){this.id=e,this.url=t,this.width=r,this.height=n,this.callbacks=i}async open(){if(this.popup&&!this.popup.closed){await n("",this.id).then(e=>e?.focus());return}let e=!0;if("maxTouchPoints"in navigator&&navigator.maxTouchPoints>0&&this.callbacks.onMobile&&(e=this.callbacks.onMobile()),!e)return;let t=function(e,t){let r=window.top;return{width:e,height:t,top:r?r.outerHeight/2+r.screenY-t/2:0,left:r?r.outerWidth/2+r.screenX-e/2:0}}(this.width,this.height);this.popup=await n(this.url,this.id,Object.entries(t).map(e=>{let[t,r]=e;return`${t}=${r}`}).join(",")),!this.popup||this.popup.closed||void 0===this.popup.closed?(this.callbacks.onBlocked?.(),this.cancelPolling(),this.popup=null):(this.callbacks.onOpen?.(this.popup),this.poll())}close(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.cancelPolling(),!this.popup||this.popup.closed||(this.popup.close(),e||this.callbacks.onClose?.())}poll(){this.interval=setInterval(()=>{try{if(!this.popup||this.popup.closed){this.cancelPolling(),this.callbacks.onAbort?.();return}this.callbacks.onPoll?.(this.popup)}catch(e){}},500)}cancelPolling(){this.interval&&(clearInterval(this.interval),this.interval=null)}}},582935:function(e,t,r){"use strict";r.d(t,{_:function(){return a}});var n,i=r(709392);let o=(e,t)=>function(){for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];e(...n).catch(e=>t((0,i.S)(e)))};var s=r(635244);let a=(n=e=>{(0,s.captureError)(e)},(e,t)=>o(e,t??n))},926076:function(e,t,r){"use strict";function n(e){return new Promise(t=>{setTimeout(t,e)})}r.d(t,{Z:function(){return n}})},532992:function(e,t,r){"use strict";r.d(t,{YN:function(){return w},PM:function(){return _},aC:function(){return A}});var n=r(652983),i=r(187968),o=r(709392),s=r(577389),a=r.n(s),c=r(530006),l=r(605637),u=r(786551),d=r(926076),g=r(151013),p=r(585183),h=r(202764),f=r(671976),m=r(607016),x=r(241663),b=r(232701),y=r(157731),v=r(435780),j=r(987391);let _={PLACEHOLDER:"placeholder",INPUT:"input",LOADING_EMAIL:"loading-email",LOADING_GITHUB:"loading-github",LOADING_GITLAB:"loading-gitlab",LOADING_BITBUCKET:"loading-bitbucket",LOADING_SAML:"loading-saml",VERIFYING:"verifying",SUCCESS:"success",ERROR:"error",ACCOUNT_NEEDS_VERIFY:"account-needs-verify"},w=[_.LOADING_GITHUB,_.LOADING_GITLAB,_.LOADING_BITBUCKET,_.LOADING_SAML,_.LOADING_EMAIL];function T(e,t){return{...e,...t}}let E=()=>{},S=()=>`${window.location.origin}/oauth/git`,A=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"login",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},[r,A]=(0,n.useReducer)(T,{loginState:_.PLACEHOLDER,loginError:null,isLoading:!0,...t.defaultState}),I=(0,n.useRef)(null),C=(0,s.useRouter)(),{query:N,isReady:k}=C,P=(0,g.Z)(C.query.next),L="/new?onboarding=true",R=(0,n.useRef)(E),O=(0,n.useRef)(t);O.current=t,(0,n.useEffect)(()=>()=>{I.current&&I.current.close(),I.current=null},[]),(0,n.useEffect)(()=>{let e=r.loginState===_.PLACEHOLDER||w.includes(r.loginState);r.isLoading&&!e&&A({isLoading:e})},[r.loginState,r.isLoading]),(0,n.useEffect)(()=>{if(a().query.next&&!(0,g.Z)(a().query.next)){let{pathname:e,query:t}=a();delete t.next,a().replace({pathname:e,query:t},void 0,{shallow:!0})}},[]),(0,n.useEffect)(()=>{if(!I.current&&k){if("saml"===N.loginType&&"1"===N.confirmed){A({loginState:_.LOADING_SAML});let e=S()+(0,h.c)({next:N.teamSlug?`/${N.teamSlug}`:void 0,...N});a().push(e);return}if("saml"===N.origin&&"/login"===location.pathname){A({loginState:_.LOADING_SAML}),a().push(`/teams/connect${(0,h.c)(N)}`);return}A({loginState:_.INPUT})}},[N,k]),(0,n.useEffect)(()=>{let e=(0,j.P)(N.loginError);e&&A({loginState:_.ERROR,loginError:(0,b.j)(e)})},[N.loginError]);let G=(0,n.useCallback)(async t=>{if(!I.current||t.source!==I.current.popup||"object"!=typeof t.data||!t.data)return;let{source:n,close:i,success:o,next:s,...l}=t.data;if("vercel-verify-auth"!==n)return;let u=I.current?.popup?.location.search,d=u?new URLSearchParams(u):null;if(i){I.current.close(!0),I.current=null,d&&d.has("origin")&&"saml"===d.get("origin")&&a().push(`/teams/connect?${d.toString()}`);return}if(l.loginError&&(I.current.close(!0),I.current=null),A(l),o){let g=d?d.get("next"):null,p=g?decodeURIComponent(g):null;if(I.current?.close(!0),I.current=null,"signup"===e)try{c.c.track(c.s.CREATE_ACCOUNT),c.c.track(c.s.SIGN_UP)}catch(h){}else if("login"===e)try{c.c.track(c.s.LOGIN)}catch(f){}if(delete globalThis.__loggedIn,O.current.onAuthenticated)O.current.onAuthenticated();else{let x=s||p||P||"signup"!==e&&"/dashboard";if(x){if("signup"===e&&x.startsWith("/turborepo"))try{let b=await (0,v.P)();b.user&&await Z(b.user.email)}catch(y){console.error(y)}location.href=x}else["loading-github","loading-gitlab","loading-bitbucket"].includes(r.loginState)&&await (0,m.x)({provider:r.loginState.split("-")[1],namespaceId:null}),location.href=L}}else O.current.onError?.()},[e,P,r]);function M(r,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{next:o,callbackParams:s,...a}=i,l=S()+(0,h.c)({next:t.useRedirect?o??P:o,...s});"login"===e?c.c.track(c.s.LOGIN,{source:`${(0,f.F)(r)} login`}):c.c.track(c.s.SIGN_UP);let u="saml"===r.toLowerCase()?x.fr:x.OK,d=`${u}${n}${(0,h.c)({mode:e,next:l,...a})}`;A({loginError:null}),t.useRedirect?(A({loginState:_[`LOADING_${r.toUpperCase()}`]}),location.href=d):(I.current=new p.Z({id:"vercel-login-popup",url:d,callbacks:{onOpen(){A({loginState:_[`LOADING_${r.toUpperCase()}`]})},onAbort(){I.current=null,A({loginState:_.INPUT})},onClose(){I.current=null,A({loginState:_.INPUT})},onBlocked(){I.current=null,A({loginState:_.ERROR,loginError:{code:null,message:`The popup to authenticate with ${(0,f.F)(r)} could not be opened.`}})}}}),I.current.open())}function $(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};M(e,"github"===e?"/login-with-github":`/${e}/connect`,t)}async function D(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{email:n}=r,s=!1;R.current(),R.current=()=>s=!0;try{A({loginState:_.LOADING_EMAIL,loginError:null});let a=await (0,l.D)(n,{mode:e});A({loginState:_.VERIFYING,email:n,securityCode:a.securityCode});for(;;){if(s)return;if(await (0,u.Z)({email:n,token:a.token,ssoToken:t.callbackParams?.ssoToken}))break;await (0,d.Z)(2500)}if(c.c.track(c.s.LOGIN),"signup"===e)try{c.c.track(c.s.CREATE_ACCOUNT),c.c.track(c.s.SIGN_UP)}catch(g){}else if("login"===e)try{c.c.track(c.s.LOGIN)}catch(p){}let h=t.next||P;if(h){if("signup"===e&&h.startsWith("/turborepo")&&n)try{await Z(n)}catch(f){console.error(f)}location.href=h;return}if("signup"===e){location.href=L;return}A({loginState:_.SUCCESS})}catch(m){if(s)return;(0,y.f)(m)&&(m.redirect||m?.code===i.aU.ACCOUNT_NEEDS_VERIFY)?r.email&&A({loginState:_.ACCOUNT_NEEDS_VERIFY}):A({loginState:_.ERROR,loginError:(0,o.S)(m)})}}async function B(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{teamSlug:n}=r;if(!n)return A({loginState:_.ERROR,loginError:{code:"",message:"Please enter a Team slug."}});M("saml","",{next:P||`/${n}`,...t,teamId:n,mode:e})}return(0,n.useEffect)(()=>(window.addEventListener("message",G),()=>{window.removeEventListener("message",G)}),[G]),{saveInput:function(e,t){r.loginState===_.ERROR?A({[e]:t,loginError:null}):A({[e]:t})},cancelLogin:function(){if(R.current(),A({loginState:_.INPUT,loginError:null}),t.skipRouterRedirectOnCancel)return;let{pathname:e,query:{next:r,isRequestAccess:n,teamName:i}}=C,o=function(e){let t={...e};for(let r of Object.keys(t))void 0===t[r]&&delete t[r];return t}({next:r,isRequestAccess:n,teamName:i});C.replace({pathname:e,query:o})},loginWithEmail:D,loginWithSAML:B,loginWithGitHub:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return $("github",e)},loginWithGitLab:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return $("gitlab",e)},loginWithBitbucket:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return $("bitbucket",e)},loginWithGit:$,state:r,dispatch:A,mode:e}};async function Z(e){try{let t=await fetch("/api/turborepo-signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(!t.ok)throw Error("An unexpected error. Please try again later.")}catch(r){console.error(r)}}},131588:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(652983),i=r(241663),o=r(585183),s=r(202764),a=r(671976),c=r(37963);function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,n.useRef)(null),r=(0,c.e1)(),l=(0,n.useRef)(e);l.current=e;let u=(0,n.useCallback)(async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.current){t.current.open();return}let c=`${window.location.origin}/new/git/connected`,u=(0,s.c)({mode:"connect",next:c,...n}),d="saml"===e?`${i.fr}${u}`:`${i.OK}${"github"===e?"/login-with-github":`/${e}/connect`}${u}`,g=l.current;t.current=new o.Z({id:`connection:${e}`,url:d,callbacks:{onBlocked(){t.current=null,r.error(`The popup to connect ${(0,a.F)(e)} could not be opened.`),g.onBlocked?.()},onPoll(r){r.location.origin+r.location.pathname===c&&(t.current?.close(),g.onSuccess?.(e))},onClose(){t.current=null,g.onClose?.()},onAbort(){t.current=null,g.onAbort?.()},onOpen:()=>g.onOpen?.(e)}}),t.current.open()},[r]);return{open:u}}},968193:function(e,t,r){"use strict";r.d(t,{B_:function(){return d},F6:function(){return u},Rd:function(){return g},vf:function(){return p}});var n=r(652983),i=r(355344);let o="Just now",s=" ago",a=(0,i.Z)("1s"),c=(0,i.Z)("1m"),l=(0,i.Z)("1h");function u(e){let{suffix:t=s,justNowThreshold:r=44e3,justNowLabel:n=o,includeSeconds:u}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return"";let d=Math.max(e,1e3);if(d<r)return n;if(u){let g=Math.round(d/a)*a,p=g%c,h=g-p,f=p>0&&p<c&&h<l?(0,i.Z)(p):"",m=h>0?(0,i.Z)(h):"";return`${m}${f&&m?" ":""}${f}${t}`}return`${(0,i.Z)(d)}${t}`}function d(e){let{includeSeconds:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u(e,{suffix:"",justNowThreshold:0,includeSeconds:t})}function g(e){let{suffix:t=s,justNowThreshold:r=44e3,justNowLabel:i=o,includeSeconds:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},[c,l]=(0,n.useReducer)(Date.now,null,Date.now),[d,g]=(0,n.useState)(null);return((0,n.useEffect)(()=>{if(!e){g(null);return}let t=Math.max(Date.now()-e,0);if(!a&&t>6e4){g(6e4);return}if(t<r){g(Math.max(r-t,1e3));return}g(1e3)},[c,e,r,a]),(0,n.useEffect)(()=>{if(d){let e=setInterval(l,d);return()=>clearInterval(e)}},[d]),e)?u(c-e,{suffix:t,justNowLabel:i,justNowThreshold:r,includeSeconds:a}):""}function p(e){let{includeSeconds:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return g(e,{suffix:"",justNowThreshold:0,includeSeconds:t})}},151013:function(e,t,r){"use strict";var n=r(165174),i=r(987391);let o=e=>{let t=(0,i.P)(e);if(!t)return null;e=decodeURIComponent(t);let r=(0,n.parse)(e);if("localhost"===r.hostname||"https:"===r.protocol&&("api.zeit.co"===r.hostname||"api.vercel.com"===r.hostname))return e;let o=e.replace(/\s/g,"");return/^\/\//.test(o)||o.includes("\\")?null:(/^\//.test(o)||(e="/"+e),e)};t.Z=o},329011:function(e,t,r){"use strict";r.d(t,{g:function(){return s}});var n=r(241663),i=r(202764),o=r(342166);async function s(e){let{user:t,team:r}=e,s=r||t,a={};r&&(a.teamId=r.id);let c=`${n.Ms}/bitbucket/verify${(0,i.c)(a)}`,l=await (0,o.Z)(c);return s.bitbucket={...l,connected:l.verified&&!l.disconnected},s}},894051:function(e,t,r){"use strict";r.d(t,{f:function(){return o}});var n=r(342166),i=r(241663);async function o(e){let t=await (0,n.Z)(`${i.OK}/github-token`,{throwOnHTTPError:!0});return t.verified?e.github={...t,verified:!0}:e.github={},e}},723301:function(e,t,r){"use strict";r.d(t,{O:function(){return s}});var n=r(241663),i=r(202764),o=r(342166);async function s(e){let{user:t,team:r}=e,s=r||t,a={};r&&(a.teamId=r.id);let c=`${n.Ms}/gitlab/verify${(0,i.c)(a)}`,l=await (0,o.Z)(c);return s.gitlab={...l,connected:l.verified&&!l.disconnected},s}},19512:function(e,t,r){"use strict";r.d(t,{t:function(){return c}});var n=r(297705),i=r(241663),o=r(202764),s=r(191425),a=r(783277);function c(e){let{user:t}=(0,a.a)(),{data:r,isLoading:c,isValidating:l,mutate:u,error:d}=(0,n.Z)(()=>t&&!t.limited&&e?`${i.vc}/detect-eligible-projects${(0,o.c)({url:e})}`:null,e=>(0,s.I)(e,{throwOnHTTPError:!0}));return{data:r,error:d,isValidating:l,isLoading:c,mutate:e=>u(e)}}},789779:function(e,t,r){"use strict";r.d(t,{Iw:function(){return l},ZP:function(){return a}});var n=r(498828),i=r(191425),o=r(241663),s=r(202764);function a(e,t){let{provider:r}=e;return(0,n.ZP)(()=>c({provider:r}),e=>(0,i.I)(e,{throwOnHTTPError:!0}),t)}function c(e){let{provider:t}=e;return t?`${o.Ms}/git-namespaces${(0,s.c)({provider:t})}`:""}async function l(e){let t=c({provider:e});return(0,n.JG)(t,(0,i.I)(t,{throwOnHTTPError:!0}),!1)}},13684:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var n=r(652983),i=r(498828),o=r(894051),s=r(723301),a=r(329011);function c(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"both",c=(0,n.useRef)(null);c.current=e;let{data:l,mutate:u,isLoading:d}=(0,i.ZP)(()=>`integration-data-${r}-${c.current?.uid||""}`,async()=>{let e=JSON.parse(JSON.stringify(c.current));switch(r){case"github":await (0,o.f)(e);break;case"gitlab":await (0,s.O)({user:e});break;case"bitbucket":await (0,a.g)({user:e});break;default:await Promise.all([(0,o.f)(e),(0,a.g)({user:e}),(0,s.O)({user:e})])}return e},t);return{account:l,isLoading:d,mutate:u}}},644941:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(498828),i=r(241663),o=r(191425),s=r(202764);function a(e,t){let{provider:r,query:a,namespaceId:c,s:l}=e;return(0,n.ZP)(()=>`${i.Ms}/search-repo${(0,s.c)({provider:r,query:a,namespaceId:c,s:l})}`,e=>(0,o.I)(e,{throwOnHTTPError:!1}),t)}},398643:function(e){e.exports={root:"card_root__as1nN",card:"card_card__c5vp0",active:"card_active__LjRsw"}},394259:function(e){e.exports={frameworkIconGroup:"framework-icon-group_frameworkIconGroup__jFOoA",numProjects:"framework-icon-group_numProjects__tbQ_3"}},656495:function(e){e.exports={box:"saml-indication_box__IlW55",small:"saml-indication_small__VNgHw",icon:"saml-indication_icon__YkWmC"}},546233:function(e){e.exports={suggestionBox:"select-git-repository_suggestionBox__ZYvhx",small:"select-git-repository_small__0XjHB",suggestionList:"select-git-repository_suggestionList__rrRVA",suggestionListBorder:"select-git-repository_suggestionListBorder__u2zcX",suggestionDescription:"select-git-repository_suggestionDescription__a6sm7",suggestionHighlight:"select-git-repository_suggestionHighlight__vPCxP",repoTitle:"select-git-repository_repoTitle__KoXpg",repoDescription:"select-git-repository_repoDescription__b5hgV",selectProvider:"select-git-repository_selectProvider__Y4WDL",gitPill:"select-git-repository_gitPill__wIfuG",continueWithText:"select-git-repository_continueWithText__ELbNP",providerBtnMobile:"select-git-repository_providerBtnMobile__VUQ2V",emptyResult:"select-git-repository_emptyResult__JDeIs",loadingResult:"select-git-repository_loadingResult__iofun",repoList:"select-git-repository_repoList__RE5d6",providerBtn:"select-git-repository_providerBtn__GjP3h",entityStack:"select-git-repository_entityStack__K3dgS",entityName:"select-git-repository_entityName__SdLF5"}},871370:function(e){e.exports={button:"clearable_button__iXqgI reset_reset__90FTf",disabled:"clearable_disabled__fgaBI"}}}]);