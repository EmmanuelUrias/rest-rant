(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[22534],{316834:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[teamSlug]/[project]/deployments",function(){return n(429802)}])},215892:function(e,t,n){"use strict";n.d(t,{B:function(){return d}});var a=n(397458),s=n(209671),i=n(97146),l=n(589383),r=n(164101),o=n(54948),c=n.n(o);function d(e){let{slackChannelId:t,slackChannelName:n}=e;return(0,a.jsxs)(s.Ct,{className:c().badge,variant:"gray-subtle",children:["Vercel Internal",(0,a.jsx)(l.Z,{text:(0,a.jsxs)(a.Fragment,{children:["This is only enabled on accounts that are a part of the Vercel Team. Feedback/Questions:"," ",(0,a.jsxs)(r.dL,{href:`https://vercel.slack.com/archives/${t}`,children:["#",n]})]}),children:(0,a.jsx)(i.Info,{})})]})}},429802:function(e,t,n){"use strict";n.r(t);var a=n(16949);t.default=a.default},16949:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ei}});var a=n(397458),s=n(425789),i=n(652983),l=n(577389),r=n(933183),o=n(4898),c=n(345935),d=n(341550),u=n(143568),h=n(839453),j=n(928),x=n(130087),m=n(62303),p=n(526864),y=n(780356),g=n(577072),v=n(828056),f=n.n(v),I=n(82435),b=n(116669),k=n(363056),C=n(623664),w=n(73683),Z=n(671309),S=n(530996),_=n(168112),D=n(646952),P=n(928303),L=n(955913),N=n(474551),B=n(476795),F=n(783277),R=n(481437),T=n(761253),E=n(780974),M=n(455522),O=n(129319),A=n(59719),G=n(209671),H=n(540851),V=n(97146),$=n(633361),K=n(874693),X=n(751510),Y=n(113745),q=n(215892),z=n(297705),U=n(709392),J=n(202764),Q=n(563160),W=n.n(Q);function ee(e){let{project:t}=e,{isLoading:n,data:s}=function(e){let t=function(e){let{project:t}=e;return`/api/deployment-times/time${(0,J.c)({project:t})}`}(e),{data:n,error:a,isLoading:s}=(0,z.Z)(t,async e=>{let t=await fetch(e);if((t.status||0)>=400&&403!==t.status)throw await t.text();return await t.json()},{shouldRetryOnError:!1});return{data:n?.data,error:a?(0,U.S)(a):void 0,statistics:void 0,isLoading:s}}({project:t}),l=(0,i.useMemo)(()=>s&&function(e,t){let n=new Map,a=e=>{if(0===t.length)return"All Data";let n=t.map(t=>e[t]);return n.join(", ")};return e.forEach(e=>{let t=a(e),s=`${t.charAt(0).toUpperCase()}${t.slice(1)}`;if(e.value){n.has(s)||n.set(s,[]);let i=(0,H.Z)(e.time);n.get(s)?.push({...e,date:i,key:s})}}),n}(s,["env"]),[s]);return(0,a.jsx)(A.Z,{children(e){let{width:t}=e;return(0,a.jsxs)("div",{style:{background:"var(--geist-background)",position:"relative",width:0===t?"100%":void 0,marginBottom:"var(--geist-space-4x)"},children:[(0,a.jsx)(en,{chartType:"line",data:l??new Map,error:void 0,height:180,isLoading:n,width:t||"100%"}),(0,a.jsx)("div",{})]})}})}let et={left:0,right:0,top:12,bottom:30};function en(e){let{height:t,data:n,width:s,onRangeChosen:i,chartType:l,isLoading:r,error:o}=e,{width:c,innerGraphWidth:d,innerGraphHeight:u,allDataGroupedByTime:h,allDataKeys:j,lineXScale:x,lineYScale:m,barStackYScale:p,barDateScale:y,colorScale:g,activeDataKey:v,setActiveDataKey:f,sliceDatum:I,setSliceDatum:b,tooltipProps:k,closeTooltip:C,isMobile:w}=(0,K.RM)({height:t,data:n,parentWidth:s,isLoading:r,error:o,margins:et});return(0,a.jsxs)("div",{className:W().card,children:[(0,a.jsxs)(Y.Z,{gap:2,children:[(0,a.jsx)(R.x,{as:"div",size:16,weight:600,children:(0,a.jsxs)(Y.Z,{align:"center",direction:"row",gap:2,children:[(0,a.jsx)("span",{children:"Average Deployment Times"}),(0,a.jsx)(q.B,{slackChannelId:"C043CGHSZLH",slackChannelName:"project-malta"})]})}),(0,a.jsx)(R.x,{color:"accents-5",children:"View the average deployment times for your project across environments."})]}),(0,a.jsx)("hr",{className:W().divider}),(0,a.jsx)($.O,{animated:!0,show:r,style:{height:t},children:(0,a.jsx)(K.kJ,{activeDataKey:v,allDataGroupedByTime:h,allDataKeys:j,barDateScale:y,barStackYScale:p,chartType:l,closeTooltip:C,colorScale:g,configuration:{disableBrush:!0,hideYAxis:!0,hideGridRows:!0},data:n,height:t,hideTooltipOnMouseLeave:w??!1,innerGraphHeight:u,innerGraphWidth:d,lineXScale:x,lineYScale:m,margins:et,onRangeChosen:i,onTooltipItemMouseEnter(e){f(e)},onTooltipItemMouseLeave(){f(null)},setSliceDatum:w?b:void 0,shouldShowPlaceholders:!1,tooltipFormatter:e=>`${String(e.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2}))} minutes`,tooltipProps:k,width:c})}),(0,a.jsxs)("div",{className:W().timeSlicePrompt,style:{visibility:null===I?"hidden":"visible"},children:[(0,a.jsx)(G.Ct,{children:(0,X.v)(I?.date)}),(0,a.jsx)(G.Ct,{children:(0,a.jsx)("button",{onClick:C,style:{all:"unset",display:"flex"},type:"button",children:(0,a.jsx)(V.X,{size:17})})})]})]})}var ea=n(201396);let es=e=>{let{branch:t,onClear:n}=e;return(0,a.jsxs)(y.Z,{className:(0,s.Z)(f().entity,f().filled),style:{minHeight:400,alignItems:"center",justifyContent:"center",padding:10},children:[(0,a.jsx)(R.x,{weight:700,children:"No Results"}),(0,a.jsx)(g.L,{y:.5}),(0,a.jsxs)(R.x,{color:"accents-6",children:["No deployments"," ",t?(0,a.jsxs)(a.Fragment,{children:["on the"," ",(0,a.jsx)("span",{style:{padding:3,borderRadius:3,background:"var(--accents-2)"},children:t})," ","branch"]}):""," ","match the current filters."]}),(0,a.jsx)(g.L,{y:.5}),(0,a.jsx)(ea.r,{onClick:n,variant:"highlight",children:"Clear Filters"})]})};var ei=(0,b.ZP)(function(){let e=(0,l.useRouter)(),{ready:t,value:n}=function(){let{value:e,isReady:t}=(0,M.Zx)(),{value:n,isReady:a}=(0,O.Hi)();return{ready:a&&t,value:n||e}}(),s="string"==typeof e.query.project?e.query.project:void 0,{data:v,flags:f}=(0,F.a)(),{team:b}=(0,B.t7)(),{data:R,error:A}=(0,L.PY)(s,{latestDeployments:1}),{data:G}=(0,N.Z)(s),[H,V]=(0,i.useState)(null),{data:$}=(0,D.ZP)(H),{selectedStatusItems:K,handleSelectStatusItem:X,clearStatus:Y}=(0,Z.Lj)(),{modal:q,open:z}=(0,p.Z)(s||null,R),{modal:U,open:J}=(0,m.Z)(s,R),Q=(0,i.useCallback)((e,t)=>{t?J(e):z(e)},[z,J]),{filteredBranch:W,setFilteredBranch:et,clearBranch:en,meta:ea,showBranchFilterBar:ei,showBranchSearchBar:el}=(0,S.R)({project:R}),er=!!(W||Object.keys(K).length),{deployments:eo,initialDataLoaded:ec,isLoadingMore:ed,isReachingEnd:eu,isEmpty:eh,loadMore:ej,mutate:ex}=(0,P.V)({limit:20,project:R,requireProject:!0,meta:ea,state:(0,Z.zK)(K)},{refreshInterval:5e3})[1];(0,I.Z)(A);let em=(0,_.FA)(R),[ep,ey]=(0,i.useState)(!1),{deployment:eg,mutate:ev}=(0,T.s)(R?.id),{isReady:ef,value:eI}=(0,O.KH)(),eb=f?.["instant-rollback"]||ef&&eI,[ek,eC]=(0,P.V)({projectId:R?.id||"",limit:10,rollbackCandidate:!0},{}),{deployments:ew,initialDataLoaded:eZ}=eC,eS=Boolean(eZ&&R&&!ew.length),[e_,eD]=(0,i.useState)(!1),[eP,eL]=(0,i.useState)(),eN=(0,i.useCallback)(()=>{eD(!1),ev().finally(()=>null)},[ev]),eB=e=>{eL(e),eD(!0)},eF=R?.link?.productionBranch?R.link.productionBranch:void 0;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.G,{title:R?`${R.name} â€“ Deployments`:"Deployments",titlePostfix:!0}),em?(0,a.jsxs)(y.Z,{wrapper:!0,children:[(0,a.jsx)(g.L,{y:2}),(0,a.jsx)(j.Z,{})]}):null,eb&&eg&&R?(0,a.jsx)(E.U,{active:e_,initialSelectedDeployment:eP,onCancel:eN,productionBranch:eF,productionDeployment:eg,projectId:R.id,rollbackCandidates:ew,swr:eC}):null,(0,a.jsxs)(o.Z,{title:"Deployments",children:[(0,a.jsxs)(a.Fragment,{children:[t&&n&&R&&("vercel-site"===R.name||"next-site"===R.name)?(0,a.jsx)(ee,{project:R.name}):null,(0,a.jsxs)(y.Z,{direction:["column","row"],flex:1,children:[(0,a.jsx)(Z.ZP,{handleSelectStatusItem:X,position:"left",selectedStatusItems:K,skeleton:!R||!ec}),el?(0,a.jsx)(C.n,{includeProductionBranch:!0,onSelect:et,project:R,skeleton:!R||!ec,value:W||""}):null]}),(0,a.jsx)(g.L,{y:.5}),ei?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.V,{branch:W,deployments:eo,isLoading:!ec,onClearBranch:en,project:R}),(0,a.jsx)(g.L,{y:.5})]}):null]}),em?(0,a.jsx)(x.Z,{}):eh?er?(0,a.jsx)(es,{branch:W,onClear(){en(),Y()}}):(0,a.jsx)(h.a,{hasProjectLink:Boolean(G&&"type"in G),project:R,scope:b?.slug||v?.user?.username||""}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(y.Z,{className:"deployment-list",children:[eo.map(e=>(0,a.jsx)(u.I,{deployment:e,handleCancelDeployment:e=>V(e.uid),handleClickCreateAlias:()=>ey(!0),isCurrentProductionDeployment:eg?.id===e.uid,noRollbackCandidates:eS,openRollbackModal:eB,project:R,redeploy:Q},e.uid)),ec?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.I,{}),(0,a.jsx)(u.I,{}),(0,a.jsx)(u.I,{}),(0,a.jsx)(u.I,{}),(0,a.jsx)(u.I,{}),(0,a.jsx)(u.I,{}),(0,a.jsx)(u.I,{}),(0,a.jsx)(u.I,{}),(0,a.jsx)(u.I,{}),(0,a.jsx)(u.I,{}),(0,a.jsx)(u.I,{}),(0,a.jsx)(u.I,{}),(0,a.jsx)(u.I,{}),(0,a.jsx)(u.I,{}),(0,a.jsx)(u.I,{}),(0,a.jsx)(u.I,{}),(0,a.jsx)(u.I,{}),(0,a.jsx)(u.I,{}),(0,a.jsx)(u.I,{}),(0,a.jsx)(u.I,{})]})]}),eu||!ec?null:(0,a.jsx)(c.Z,{loading:ed,onClick:ej})]}),(0,a.jsx)(d.Z,{active:ep,onCancel:()=>ey(!1)}),(0,a.jsx)(k.Z,{active:Boolean($),deployment:$,onClose(){V(null),ex()},teamId:b?.id}),q,U]})]})},{active:"Deployments",pageProps:{noIndex:!0}})},563160:function(e){e.exports={card:"chart_card__lO97j",divider:"chart_divider__gNkx0",timeSlicePrompt:"chart_timeSlicePrompt__hjeom"}},54948:function(e){e.exports={badge:"vercel-internal-badge_badge__yn65D"}}},function(e){e.O(0,[80508,11591,76588,53575,82366,1257,92576,9826,65377,4369,95019,8860,86157,15127,67566,80953,32992,50340,63385,12593,78856,31150,11759,23430,49774,92888,40179],function(){return e(e.s=316834)}),_N_E=e.O()}]);